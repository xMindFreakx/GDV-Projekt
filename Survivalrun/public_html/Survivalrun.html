<html>
	<head>
            <meta name="author" content="Andreas Maisch Maxi Hartmann Anton Stein Patrick Kiermasch">
		<title>Survivalrun</title>
		<style>
			body { margin: 0; }
			canvas { width: 100%; height: 100% }
		</style>
	</head>
        <!--
            GDV Project 2015 - Gruppe NR. 5  - Survivalrun
                    created by
                    Andreas Maisch
                    Maxi Hartmann
                    Anton Stein
                    Patrick Kiermasch
        -->
	<body>
            <!--Three.js-->
		<script src="Scripts/three.min.js"></script>
                <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
		<script>
                    //Variables
                    var player;
                    var renderer, scene, camera;
                    var clock = new THREE.Clock();
                    var  controls = {
                        left: false,
                        up: false,
                        right: false,
                        down: false
                    };
                    
                    //Calls
                    Init();
                    animate();
                    
                    //Main Start
                    function Init()
                    {
			scene = new THREE.Scene();
			camera = new THREE.PerspectiveCamera( 75, window.innerWidth/window.innerHeight, 0.1, 1000 );
                        camera.position.z = 5;
                        camera.position.y = 3;
                        camera.rotation.x = 12;

			renderer = new THREE.WebGLRenderer();
			renderer.setSize( window.innerWidth, window.innerHeight );
			document.body.appendChild( renderer.domElement );
                        
                        //Content
                                 
                        //Player
                        var playerText = new THREE.ImageUtils.loadTexture( 'Textures/test.jpg' );
                        playerText.minFilter = THREE.NearestFilter;
                        var playerMat = new THREE.MeshBasicMaterial( { map: playerText } );
                        var playerGeo = new THREE.BoxGeometry(1, 2, 1);
                        player = new THREE.Mesh(playerGeo, playerMat);
                        player.position.y = 3;
                        scene.add(player);
	
                        //World
                        var mat2 = new THREE.MeshBasicMaterial( { color: 0xff0f00 } );
                        var geo2 = new THREE.BoxGeometry(100, 1, 100);
                        var cube2 = new THREE.Mesh(geo2, mat2);
                        scene.add(cube2);
                        
                         }
                         
                    function animate() 
                    {
                        requestAnimationFrame( animate );
                        renderer.render( scene, camera );		
                        KeyboardInput();
                    }
                      
                    function KeyboardInput()
                    {
                        $(document).keydown(function (e) {
                           switch (e.keyCode) {
                               case 65:
                                   controls.left = true;
                                   break;
                               case 87:
                                   controls.up = true;
                                   break;
                               case 68:
                                   controls.right = true;
                                   break;
                               case 83:
                                   controls.down = true;
                                   break;
                                }
                         });
                        $(document).keyup(function (e) {
                            switch (e.keyCode) {
                                case 65:
                                    controls.left = false;
                                    break;
                                case 87:
                                    controls.up = false;
                                    break;
                                case 68:
                                    controls.right = false;
                                    break;
                                case 83:
                                    controls.down = false;
                                    break;
                            }
                         });
                          PlayerControls();
                     }
                    function PlayerControls()
                    {
                        var move = 3 * clock.getDelta();
                         if(controls.left==true)
                         {
                               player.translateX( -move );
                         }
                         if(controls.right==true)
                         {
                               player.translateX( move );
                         }
                         if(controls.up==true)
                         {
                             //jump
                         }
                         if(controls.down==true)
                         {
                             //crouch
                         }
                    }
		</script>
	</body>
       
</html>